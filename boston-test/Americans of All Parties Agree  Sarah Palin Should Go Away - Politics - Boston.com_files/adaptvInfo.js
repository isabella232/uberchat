(function(){window.adaptvInfo={POSITION:{ABOVE_VISIBLE_AREA:"aboveVisibleArea",BELOW_VISIBLE_AREA:"belowVisibleArea",LEFT_TO_VISIBLE_AREA:"leftToVisibleArea",RIGHT_TO_VISIBLE_AREA:"rightToVisibleArea",IN_VISIBLE_AREA:"inVisibleArea",HIDDEN:"hidden",UNKNOWN:"NA"},ADSAFE:{URL:"//pixel.adsafeprotected.com/bapi",AN_ID:6058},getElementXY:function(d){var b=d,a=0,f=0,e=0;while(b&&!isNaN(b.offsetLeft)&&!isNaN(b.offsetTop)){if(window.getComputedStyle){e=window.getComputedStyle(b,null)}a+=b.offsetLeft-b.scrollLeft+(e?parseInt(e.getPropertyValue("border-left-width"),10):0);f+=b.offsetTop-b.scrollTop+(e?parseInt(e.getPropertyValue("border-top-width"),10):0);b=b.offsetParent}return{x:d.X=a,y:d.Y=f}},getElementStyle:function(a,b){if(a.currentStyle){return a.currentStyle[b]}else{if(document.defaultView&&document.defaultView.getComputedStyle){return document.defaultView.getComputedStyle(a,"")[b]}else{return a.style[b]}}},getElementInfoForElement:function(c){var b={leftOffset:0,topOffset:0,width:0,height:0};if(c){b.width=c.offsetWidth;b.height=c.offsetHeight;if(c.getBoundingClientRect){var a=c.getBoundingClientRect();b.leftOffset=Math.round(a.left);b.topOffset=Math.round(a.top)}else{var d=this.getElementXY(c);b.leftOffset=d.x;b.topOffset=d.y}}return b},isElementHidden:function(c){var a=false;var b=c;while(b){a=this.getElementStyle(c,"visibility")=="hidden"||this.getElementStyle(c,"display")=="none";if(a){break}b=b.offsetParent}return a},getWindowInfo:function(c){var a={width:0,height:0,leftOffset:0,topOffset:0};if(typeof(c.innerWidth)!="undefined"){a.width=c.innerWidth;a.height=c.innerHeight}else{if(c.document.documentElement&&(c.document.documentElement.clientWidth||c.document.documentElement.clientHeight)){a.width=c.document.documentElement.clientWidth;a.height=c.document.documentElement.clientHeight}else{if(document.body.offsetWidth&&document.body.offsetHeight){a.width=c.document.body.offsetWidth;a.height=c.document.body.offsetHeight}}}var b=(document.compatMode&&document.compatMode!="BackCompat")?document.documentElement:document.body;a.leftOffset=document.all?b.scrollLeft:window.pageXOffset;a.topOffset=document.all?b.scrollTop:window.pageYOffset;return a},getElementPositionRelativeToVisiblearea:function(a,c){var b;if(c.width>0&&c.height>0&&a.width>0&&a.height>0){if(a.topOffset+a.height<=c.topOffset){b=this.POSITION.ABOVE_VISIBLE_AREA}else{if(a.topOffset>=c.height+c.topOffset){b=this.POSITION.BELOW_VISIBLE_AREA}else{if(a.leftOffset+a.width<=c.leftOffset){b=this.POSITION.LEFT_TO_VISIBLE_AREA}else{if(a.leftOffset>=c.width+c.leftOffset){b=this.POSITION.RIGHT_TO_VISIBLE_AREA}else{b=this.POSITION.IN_VISIBLE_AREA}}}}}else{b=this.POSITION.HIDDEN}return b},getVisibleFrameRect:function(b,a){var c={leftOffset:0,topOffset:0,width:0,height:0};c.leftOffset=Math.max(b.leftOffset,a.leftOffset);c.topOffset=Math.max(b.topOffset,a.topOffset);c.width=Math.min(b.leftOffset+b.width,a.leftOffset+a.width)-c.leftOffset;c.height=Math.min(b.topOffset+b.height,a.topOffset+a.height)-c.topOffset;return c},getHorizontalPercentageVisibility:function(b,c){var a=0;a=(Math.min((c.width-b.leftOffset),(b.width+b.leftOffset))/b.width)*100;a=Math.round(Math.min(Math.max(0,a),100)*100)/100;a=Math.round(a);return a},getVerticalPercentageVisibility:function(b,c){var a=0;a=(Math.min((c.height-b.topOffset),(b.height+b.topOffset))/b.height)*100;a=Math.round(Math.min(Math.max(0,a),100)*100)/100;a=Math.round(a);return a},getPlacementInfo:function(c,e,f){var b={position:this.POSITION.UNKNOWN,hVisibility:0,vVisibility:0};if(this.isElementHidden(c)){b.position=this.POSITION.HIDDEN}if(b.position!=this.POSITION.HIDDEN){var d={leftOffset:0,topOffset:0,width:f.width,height:f.height};var a=this.getElementPositionRelativeToVisiblearea(e,d);b.position=a;if(a==this.POSITION.IN_VISIBLE_AREA){b.hVisibility=this.getHorizontalPercentageVisibility(e,d);b.vVisibility=this.getVerticalPercentageVisibility(e,d)}if(b.hVisibility==0||b.vVisibility==0){b.hVisibility=0;b.vVisibility=0}}return b},getPlacementInfoWhenEmbeddedInIFrames:function(h,d,f,p){var c={position:this.POSITION.UNKNOWN,hVisibility:0,vVisibility:0};if(this.isElementHidden(h)){c.position=this.POSITION.HIDDEN}if(c.position!=this.POSITION.HIDDEN){var o=f[f.length-1];var l={leftOffset:0,topOffset:0,width:p.width,height:p.height};var k=this.getElementPositionRelativeToVisiblearea(o,l);c.position=k;if(k==this.POSITION.IN_VISIBLE_AREA){var b=this.getVisibleFrameRect(o,l);var e=f.length-1;var g=k;while(e>0){var n=f[e-1];var m=b;n.leftOffset+=m.leftOffset;n.topOffset+=m.topOffset;g=this.getElementPositionRelativeToVisiblearea(n,m);if(g==this.POSITION.IN_VISIBLE_AREA){b=this.getVisibleFrameRect(n,m)}else{break}e--}if(g==this.POSITION.IN_VISIBLE_AREA){d.leftOffset+=b.leftOffset;d.topOffset+=b.topOffset;var i=this.getElementPositionRelativeToVisiblearea(d,b);if(i==this.POSITION.IN_VISIBLE_AREA){b=this.getVisibleFrameRect(d,b);var a=(b.width/d.width)*100;a=Math.round(a*100)/100;a=Math.round(a);c.hVisibility=a;a=(b.height/d.height)*100;a=Math.round(a*100)/100;a=Math.round(a);c.vVisibility=a}else{c.position=this.POSITION.HIDDEN}}else{c.position=this.POSITION.HIDDEN}}}return c},getAdPlayerPositionInfo:function(f){var l={hostname:window.location.hostname,pageUrl:window.location.href,referrer:document.referrer,inIFrame:false,iframe:{parentUrl:"",topUrl:"",leftOffset:0,topOffset:0,width:0,height:0,crossDomain:false,levels:0},win:{width:0,height:0,leftOffset:0,topOffset:0},el:{leftOffset:0,topOffset:0,width:0,height:0,position:this.POSITION.UNKNOWN,hVisibility:0,vVisibility:0},browser:"NA"};l.browser=adaptvBrowserDetect.browser;var b=this.getElementInfoForElement(f);l.el.leftOffset=b.leftOffset;l.el.topOffset=b.topOffset;l.el.width=b.width;l.el.height=b.height;if(this.isElementHidden(f)){l.el.position=this.POSITION.HIDDEN}l.win=this.getWindowInfo(window);var a=this.getPlacementInfo(f,l.el,l.win);if(a.position!=this.POSITION.IN_VISIBLE_AREA){l.el.position=a.position;l.el.hVisibility=a.hVisibility;l.el.vVisibility=a.vVisibility;l.el.width=l.el.width<l.win.width?l.el.width:l.win.width;l.el.height=l.el.height<l.win.height?l.el.height:l.win.height;return l}try{var o=window;var c=window.location;var n;try{n=window.top.location.href;if(typeof n===undefined){throw new Error("WebKit browser based adplayer is in an IFrame!")}else{if(n!==l.pageUrl){l.inIFrame=true;l.iframe.topUrl=n}}}catch(m){l.inIFrame=true;l.iframe.crossDomain=true}if(l.inIFrame&&n){if(window.parent&&window.parent.location){l.iframe.parentUrl=window.parent.location.href}l.win=this.getWindowInfo(window.top);var g=new Array();while(o.parent&&o.parent.document&&o.frames&&o!=window.top){var j=o.parent.document.getElementsByTagName("iframe");for(var h=0;h<j.length;h++){if(j[h].src&&j[h].src==c.href){var d=this.getElementInfoForElement(j[h]);if(h==0){l.iframe.width=d.width;l.iframe.height=d.height}l.iframe.leftOffset=d.leftOffset;l.iframe.topOffset=d.topOffset;g[l.iframe.levels]=d;l.iframe.levels+=1;c=o.parent.location;break}}o=o.parent}var a=this.getPlacementInfoWhenEmbeddedInIFrames(f,l.el,g,l.win);l.el.position=a.position;l.el.hVisibility=a.hVisibility;l.el.vVisibility=a.vVisibility}}catch(k){l.iframe.levels=-1}if(!l.inIFrame){var a=this.getPlacementInfo(f,l.el,l.win);l.el.position=a.position;l.el.hVisibility=a.hVisibility;l.el.vVisibility=a.vVisibility}return l},videoPlayerNodes:{},getPlayerElement:function(d,h){if(this.videoPlayerNodes[d]&&this.videoPlayerNodes[d][d]){return this.videoPlayerNodes[d]}var b;if(h&&document[h]&&document[h][d]){b=document[h]}else{if(h&&window[h]&&window[h][d]){b=window[h]}else{var k=document.getElementsByTagName("object");var a=document.getElementsByTagName("embed");var n=[];for(var g=0,c=k.length;g<c;n.push(k[g++])){}var f=[];for(var g=0,c=a.length;g<c;f.push(a[g++])){}var j=n.concat(f);for(var g=0;g<j.length;g++){try{if(j[g][d]()){b=j[g];break}}catch(m){}}}}if(b){this.videoPlayerNodes[d]=b}return b},injectJavascript:function(b){var a=document.createElement("script");var c=document.head||document.getElementsByTagName("head")[0]||document.documentElement;a.type="text/javascript";a.src=b;if(c!==null){c.appendChild(a)}},fraudScoreCallback:function(d,b,a){var c=this.getPlayerElement(d,b);c.__adaptv__fraudscore(a)},loadAdsafeJS:function(a,c,d){var e="adaptv"+new Date().getTime();window[e]=function(){adaptvInfo.fraudScoreCallback.apply(adaptvInfo,[c,a,arguments[0]]);window[e]=undefined};var b=this.ADSAFE.URL+"?anid="+this.ADSAFE.AN_ID+"&ias_callback="+e+"&pubid="+window.location.hostname+"&placementId="+d;this.injectJavascript(b)},AdPlayerNode:function(e){this.htmlNode=adaptvInfo.getPlayerElement(e,null);this.pointsPerEdge=1;this.minPtsViewable=3;var b=adaptvInfo.getElementInfoForElement(this.htmlNode);var g=b.topOffset+window.scrollY;var f=b.leftOffset+window.scrollX;var d=b.width;var a=b.height;var c=d/(this.pointsPerEdge+1);var h=a/(this.pointsPerEdge+1);this.getTopPoints=function(){var l=[];var j=f;for(var k=0;k<this.pointsPerEdge;k++){j+=c;l.push({x:j,y:g})}return l};this.getRightPoints=function(){var k=[];var l=g;for(var j=0;j<this.pointsPerEdge;j++){l+=h;k.push({x:(f+d)-1,y:l})}return k};this.getBottomPoints=function(){var l=[];var j=f;for(var k=0;k<this.pointsPerEdge;k++){j+=c;l.push({x:j,y:(g+a)-1})}return l};this.getLeftPoints=function(){var k=[];var l=g;for(var j=0;j<this.pointsPerEdge;j++){l+=h;k.push({x:f,y:l})}return k};this.getAllPoints=function(){return[this.getTopPoints(),this.getRightPoints(),this.getBottomPoints(),this.getLeftPoints()]};this.getAllPointsFlattened=function(){var o=[];var m=this.getAllPoints();for(var n=0;n<m.length;n++){var k=m[n];for(var l=0;l<k.length;l++){o.push(k[l])}}return o}},SPOT:{ID:1,GET_NEXT_ID:function(){return this.ID++}},Spot:function(){var e="/redir/client/FPSDetector.swf";var b="//redir.adap.tv";var f="//adaptv-a.akamaihd.net";var d=document.location.protocol=="https:";var a=(d)?f:b;var c=a+e;this.viewable=-1;this.id=adaptvInfo.SPOT.GET_NEXT_ID();this.interval=0;this.callbackFn;this.placementContext;this.inject=function(m,l,j,o){var n="adaptvSpotDiv_"+this.id;var g="adaptvVWSpot_"+this.id;if(document.getElementById(n)){return}this.placementContext=j;this.callbackFn=o;var p='<object width="1px" height="1px" id="{spotId}" name="{spotId}" align="center">';p+='<param name="movie" value="{url}" />';p+='<param name="bgcolor" value="#000000"/>';p+='<param name="allowScriptAccess" value="always" />';p+='<param name="FlashVars" value="autoStart=true"/>';p+='<embed src="{url}" width="1px" height="1px" id="{spotId}" name="{spotId}" align="center" bgcolor="#000000" allowScriptAccess="always" FlashVars = "autoStart=true" type="application/x-shockwave-flash"/>';p+="</object>";p=p.split("{url}").join(c);p=p.split("{spotId}").join(g);var i=document.body||document.getElementsByTagName("body")[0]||document.documentElement;var h=document.createElement("div");h.id=n;h.style.left=m+"px";h.style.top=l+"px";h.style.height="1px";h.style.width="1px";h.style.position="absolute";h.innerHTML=p;i.appendChild(h);var k=this;this.interval=setInterval(function(){if(window.__adaptv__&&window.__adaptv__.jsproxy&&window.__adaptv__.jsproxy[g]){__adaptv__.jsproxy[g]["fpsdetector"].__on("FPSDetected",k.listener,k);clearInterval(k.interval)}},100)};this.listener=function(g){this.viewable=parseInt(g.data,10);if(this.callbackFn){this.callbackFn.apply(this.placementContext);this.callbackFn=null}};this.destroy=function(){var i=document.body||document.getElementsByTagName("body")[0]||document.documentElement;var h="adaptvSpotDiv_"+this.id;var g=document.getElementById(h);i.removeChild(g)}},Placement:function(a){this.id=a;this.playerNode=new adaptvInfo.AdPlayerNode(a);this.spotsInjected=false;this.viewable=-1;this.spots=[];this.spotsState=[];this.timeout;this.timeout_ms=3000;this.callbackFnName="";this.getInfo=function(g){if(!this.spotsInjected){this.callbackFnName=g;var f=this.playerNode.getAllPointsFlattened();for(var c=0;c<f.length;c++){var b=f[c];var d=new adaptvInfo.Spot();d.inject(b.x,b.y,this,this.spotCallback);this.spots.push(d);this.spotsState.push(-1)}var e=this;this.timeout=setTimeout(function(){clearTimeout(e.timeout);if(!e.allSpotsReady()&&e.callbackFnName!=""){e.playerNode.htmlNode[e.callbackFnName](e.getMergedInfo())}},this.timeout_ms);this.spotsInjected=true;return null}return this.getMergedInfo()};this.spotCallback=function(){if(this.allSpotsReady()){clearTimeout(this.timeout);if(this.callbackFnName!=""){var b=this.getMergedInfo();this.playerNode.htmlNode[this.callbackFnName](b)}}};this.getMergedInfo=function(){var e=adaptvInfo.getVWInfo(this.playerNode.htmlNode);if(this.allSpotsReady()){var b=0;for(var c=0;c<this.spots.length;c++){var d=this.spots[c];b+=d.viewable;this.spotsState[c]=d.viewable}this.viewable=(b>=this.playerNode.minPtsViewable)?1:0}else{this.viewable=-1}e.viewableNew=this.viewable;if(e.active===0&&e.viewableNew===1){e.viewableNew=0}e.spotsState=this.spotsState.join();return e};this.allSpotsReady=function(){var c=0;for(var b=0;b<this.spots.length;b++){if(this.spots[b].viewable>-1){c++}}return(c==this.spots.length)};this.dispose=function(){var c=this.spots.length;for(var b=0;b<c;b++){this.spots[b].destroy()}this.playerNode=null;this.spotsInjected=false;this.viewable=-1;this.spots=[];this.spotsState=[];this.timeout=0;this.timeout_ms=3000;this.callbackFnName="";this.id=""}},placements:[],getInfo:function(h,a,m,l){var b={viewable:-1,viewableNew:-1,domId:"",active:0,spotsState:""};var o=this.getPlayerElement(a,h);var f=["7221","7658","7257","7386","7480","7716","7597","7865"];var k=["mindjoltinc","cinesport"];var c=false;for(var g=0;g<f.length;g++){if(f[g]===l){c=true}}for(var e=0;e<k.length;e++){if(k[e]===l){c=true}}if(c===true){b=adaptvInfo.getVWInfo(o);b.viewableNew=-1;b.spotsState="-1,-1,-1,-1";return b}var n=window.adaptvInfo.placements;var d;for(var g=0;g<n.length;++g){if(n[g].id===a){d=n[g];break}}if(d==undefined){d=new window.adaptvInfo.Placement(a);n.push(d)}return d.getInfo(m)},removePlacement:function(c){var a=window.adaptvInfo.placements;for(var b=0;b<a.length;b++){if(a[b].id===c){a[b].dispose();a.splice(b,1);break}}},getVWInfo:function(k){var b={viewable:-1,domId:"",active:0};var j={ACTIVE:1,INACTIVE:0};if(k){var d=window.adaptvInfo.getAdPlayerPositionInfo(k);b.pWidth=d.el.width;b.pHeight=d.el.height;b.domId=k.id;if(d.el.position!=window.adaptvInfo.POSITION.UNKNOWN){var g=(d.el.width*d.el.hVisibility)/100;var a=(d.el.height*d.el.vVisibility)/100;if(g==0||a==0){b.viewable=0}else{var c=(g*a)/(d.el.width*d.el.height);b.viewable=(c>=0.5)?1:0}}else{if(d.inIFrame){b.errinfo="inIframe"}if(d.iframe.crossDomain){b.errinfo="iframeCrossDomain"}}var h=false;var f=["webkit","moz","ms","o"];if(document.visibilityState){h=document.visibilityState!="visible"}else{for(var e=0;e<f.length;e++){if(document[f[e]+"VisibilityState"]){h=document[f[e]+"VisibilityState"]!="visible";break}}}b.active=(!h)?j.ACTIVE:j.INACTIVE}return b}};window.adaptvBrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"An unknown version";this.OS=this.searchString(this.dataOS)||"An unknown OS"},searchString:function(d){for(var a=0;a<d.length;a++){var b=d[a].string;var c=d[a].prop;this.versionSearchString=d[a].versionSearch||d[a].identity;if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity}}else{if(c){return d[a].identity}}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);if(a==-1){return}return parseFloat(b.substring(a+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"IE11"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};window.adaptvBrowserDetect.init();window.delegate=function(b,a){if(arguments.length>2){var c=[];for(var d=2;d<arguments.length;d++){c.push(arguments[d])}return function(){return a.apply(b,c)}}else{return function(){return a.call(b)}}};window.adaptvUtils={locateObjectNode:function(h,m){var b=document.getElementById(m);var d,c;if(b!==null){for(d=0;d<b.childNodes.length;d++){var l=b.childNodes[d];if(l.nodeName.toLowerCase()=="span"){for(c=0;c<l.childNodes.length;c++){var n=l.childNodes[c];if(n.nodeName.toLowerCase()=="object"||n.nodeName.toLowerCase()=="embed"){l=n;break}}}if(l.nodeName.toLowerCase()=="object"&&(adaptvBrowserDetect.browser=="Firefox"||adaptvBrowserDetect.browser=="Chrome"||adaptvBrowserDetect.browser=="Safari"||adaptvBrowserDetect.browser=="IE11")){return l}else{if((l.nodeName.toLowerCase()=="embed"&&(adaptvBrowserDetect.browser=="Firefox"||adaptvBrowserDetect.browser=="Chrome"||adaptvBrowserDetect.browser=="Safari"||adaptvBrowserDetect.browser=="IE11"))||(l.nodeName.toLowerCase()=="object"&&(adaptvBrowserDetect.browser=="Explorer"||adaptvBrowserDetect.browser=="IE11"))){return l}}}}var a=document.getElementsByTagName("embed");var g=document.getElementsByTagName("object");var f=[];var k;if(a.length>0){for(d=0;d<a.length;d++){k=a[d].src;if(k===undefined||k===null){continue}if(this.getEndFileName(k.toString().toLowerCase())==this.getEndFileName(h.toLowerCase())){f.push(a[d])}}}else{if(g.length>0){for(d=0;d<g.length;d++){k=g[d].Movie;if(k===undefined||k===null){k=g[d].data}if(k===undefined||k===null){continue}if(this.getEndFileName(k.toLowerCase())==this.getEndFileName(h.toLowerCase())){f.push(g[d])}}}}if(f.length==1){return f[0]}return null},locateObjectContainer:function(c,a){var b=document.getElementById(a);if(c){return c.parentNode}else{return b}},getCompanionDivById:function(b,a,h){a=a||document;h=h||0;var g=a.getElementById(b);if(g){return g}var f=a.getElementsByTagName("iframe");if(f&&h<3){for(var c=0;c<f.length;c++){try{g=adaptvUtils.getCompanionDivById(b,f[c].contentDocument,h+1);if(g){return g}}catch(d){}}}return null},getEndFileName:function(a){if(a.indexOf("/")>-1){var b=a.split("/");if(b.length>0){return b[b.length-1]}return null}else{return a}},isObjectAttribute:function(c,b,a){if(String(c.getAttribute(b)).toLowerCase()==String(a).toLowerCase()||(c.nodeName.toLowerCase()=="object"&&adaptvUtils.objectTagContainsParamValue(c,b,a))){return true}else{return false}},objectTagContainsParamValue:function(e,d,c){for(var b=0;b<e.childNodes.length;b++){if(e.childNodes[b].nodeName.toLowerCase()=="param"){var a=e.childNodes[b];if(a.getAttribute("name").toLowerCase()==d.toLowerCase()){return a.getAttribute("value").toLowerCase()==c.toLowerCase()}}}},parsePixelValue:function(b){if(!b){return NaN}var a=b.split("px");return Number(a[0])}};window.adaptvAdPlayer={videoPlayerNode:null,videoPlayerContainer:null,errMessage:"",swfName:null,videoPlayerId:"adaptvDiv",DEFAULT_COMP_WIDTH:300,DEFAULT_COMP_HEIGHT:250,iframeLoads:{},iframeTimeouts:{},DIV_SEARCH_PERIOD:100,curAdFormat:null,titlecardAdUnitHeight:null,counterHeight:null,defaultAdServerUrl:"http://qa1",adServerUrl:this.defaultAdServerUrl,onCloseBeaconTemplate:null,onCloseBeacon:null,onCloseFired:false,loadDate:new Date(),initialize:function(e,i,g,j,d,c,a,f,b){this.adServerUrl=(b==undefined)?adaptvAdPlayer.defaultAdServerUrl:b;this.swfName=e;this.initClickHandling();if(typeof(f)!="undefined"&&typeof(f)!="null"){this.videoPlayerId=f}this.videoPlayerNode=adaptvUtils.locateObjectNode(this.swfName,this.videoPlayerId);this.videoPlayerContainer=adaptvUtils.locateObjectContainer(this.videoPlayerNode,this.videoPlayerId);if(this.videoPlayerNode===null||this.videoPlayerNode===undefined){this.errMessage="video player not found in DOM";return false}if(!this.isBrowserOK(this.videoPlayerNode)){return false}if(!this.createAdPlayer(this.swfName,i,g,j,d,a)){return false}if(!c){if(!this.createAdPlayer(this.swfName,i,g,j,d)){return false}}return true},setPlayheadTime:function(a){if(adaptvAdPlayer.onCloseBeaconTemplate!=undefined&&adaptvAdPlayer.onCloseBeaconTemplate!=null){adaptvAdPlayer.onCloseBeacon=adaptvAdPlayer.onCloseBeaconTemplate.replace("{playHeadTime}",a)}},resize:function(c,k,i,d){var h=document.getElementById("adaptv_ad_player_div");if(c===null){c=h.style.left}if(k===null){k=h.style.top}if(i===null){i=h.adaptvWidth}if(d===null){d=h.adaptvHeight}h.style.top=String(k)+"px";h.style.left=String(c)+"px";h.style.width=String(i)+"px";h.adaptvWidth=Number(i);h.adaptvHeight=Number(d);var f=document.getElementById("debugBox");if(f!==null){f.style.backgroundColor="red";f.style.opacity="0.4";f.style.filter="alpha(opacity = 40)";f.style.border="0px";f.style.left="0px";f.style.top="0px";f.style.width=String(0)+"px";f.style.height=String(0)+"px";f.style.visibility="none";f.style.position="relative"}var j=document.getElementById("adaptvViewport");if(!j){return}var e=adaptvUtils.parsePixelValue(j.style.width);var b=adaptvUtils.parsePixelValue(j.style.height);if(this.curAdFormat=="banner"){this.resizeViewport(d-b,(i-e)/2,e,b)}else{if(this.curAdFormat=="titlecard"){var g=Math.max(d-this.titlecardAdUnitHeight,0)/2+this.counterHeight;var a=(i-e)/2;this.resizeViewport(g,a,e,b)}}},initClickHandling:function(){if(adaptvBrowserDetect.browser=="Explorer"&&adaptvBrowserDetect.version==6){document.onfocusout=delegate(adaptvAdPlayer,adaptvAdPlayer.checkAdaptvBannerClick)}else{document.onblur=delegate(adaptvAdPlayer,adaptvAdPlayer.checkAdaptvBannerClick)}},isBrowserOK:function(a){var b=true;if(!((adaptvBrowserDetect.OS=="Windows"&&(adaptvBrowserDetect.browser=="Explorer"||adaptvBrowserDetect.browser=="IE11"))||(adaptvBrowserDetect.browser=="Firefox"&&adaptvBrowserDetect.version>=3)||(adaptvBrowserDetect.browser=="Chrome")||(adaptvBrowserDetect.browser=="Safari"))){this.errMessage+=" Unsupported OS-Browser combination.";b=false}if(a.parentNode.tagName.toLowerCase()=="span"&&adaptvBrowserDetect.browser=="Firefox"){this.errMessage+=" Container cannot be SPAN tag on Firefox.";b=false}if(!(adaptvUtils.isObjectAttribute(a,"wmode","transparent")||adaptvUtils.isObjectAttribute(a,"wmode","opaque"))){this.errMessage+=" video object is not set to wmode=transparent or wmode=opaque.";b=false}return b},createAdPlayer:function(e,i,g,j,d,a){if(document.getElementById("adaptv_ad_player_div")!==null){return true}var f=this.videoPlayerNode;if(f===null){this.errMessage="could not locate video player node";return false}var k=this.videoPlayerContainer;if(k!==undefined&&k!==null){var c=document.createElement("div");c.id="adaptv_ad_player_div";c.style.position="relative";c.style.visibility="visible";c.style.border="0px";c.style.backgroundColor="transparent";c.style.left=String(i)+"px";c.style.width=String(j)+"px";c.style.height="0px";c.style.zIndex="5000";c.style.display="none";c.adaptvWidth=Number(j);c.adaptvHeight=Number(d);c.closing=false;c.opening=false;c.closeClicked=false;k.insertBefore(c,f);if(adaptvBrowserDetect.OS=="Windows"&&adaptvBrowserDetect.browser=="Explorer"&&adaptvBrowserDetect.version==6){k.style.backgroundColor="transparent"}if(a){var b=document.createElement("div");b.id="debugBox";b.style.backgroundColor="red";b.style.opacity="0.4";b.style.filter="alpha(opacity = 40)";b.style.border="0px";b.style.left="0px";b.style.top="0px";b.style.width=String(j)+"px";b.style.height=String(d)+"px";b.style.visibility="visible";b.style.position="relative";c.appendChild(b)}return true}else{this.errMessage="video player container not found";return false}},createDiv:function(c,f,e,d,a,b){var g=document.createElement("div");g.id=c;g.style.position="absolute";if(b!==undefined&&b!==null){g.style.visibility=b}g.style.overflow="hidden";g.style.border="0px";g.style.backgroundColor="transparent";g.style.top=f+"px";g.style.left=e+"px";g.style.width=d+"px";g.style.height=a+"px";return g},resizeViewport:function(e,d,b,a){var c=document.getElementById("adaptvViewport");if(c!==null){c.style.top=e+"px";c.style.left=d+"px";c.style.width=b+"px";c.style.height=a+"px"}return c},createViewport:function(e,d,b,a,f){var c=document.getElementById("adaptvViewport"+f);if(c===undefined||c===null){c=this.createDiv("adaptvViewport"+f,e,d,b,a,"visible");c.style.display="none"}else{c=this.resizeViewport(e,d,b,a);c.innerHTML=""}return c},createIFrame:function(b,c,a,d,i,h,f,g){var e=document.createElement("iframe");if(e.attachEvent){g&&e.attachEvent("onload",g)}else{e.onload=g}e.onmouseover=h;e.onmouseout=f;e.name=b;e.id=b;e.showBannerId=c;e.src=a;e.frameBorder="0";e.style.border="0px";e.marginWidth="0px";e.marginHeight="0px";e.hspace="0";e.vspace="0";e.allowtransparency="true";e.style.backgroundColor="white";e.style.background="white";e.scrolling="no";e.style.top="0px";e.style.left="0px";e.style.width=d+"px";e.style.height=i+"px";e.style.border="0px";e.style.position="absolute";e.style.overflow="hidden";return e},createAd:function(n,g,p,l,r,a,b,t,e,v){g=unescape(g);this.curAdFormat=r;if(typeof(t)=="undefined"){t=false}var o="adaptvBanner"+n;if(r=="banner"||r=="titlecard"){var w=document.getElementById("adaptv_ad_player_div");if(w.closing){setTimeout(delegate(adaptvAdPlayer,adaptvAdPlayer.createAd,n,g,p,l,r,a,b,t,e,v),50);return o}var i=w.adaptvHeight;var f=w.adaptvWidth;var d;var k;var y;var c=t?16:0;var h=t?52:0;w.banner_ad_queue_full=true;if(r=="banner"){d=this.createViewport(i-l-c-2,(f-p)/2,p,l+c,n);w.appendChild(d);k=this.createDiv(o,0,0,p,l+c);y=this.createDiv("adaptvBannerAd",c,0,p,l);k.appendChild(y)}else{if(r=="titlecard"){this.titlecardAdUnitHeight=e;this.counterHeight=v;w.closeClicked=false;var m=Math.max(i-e,0)/2+v;d=this.createViewport(m,(f-p)/2,p,l,n);w.style.overflow="visible";d.style.overflow="visible";w.appendChild(d);k=this.createDiv(o,0,0,p,l);k.style.overflow="visible";y=this.createDiv("adaptvTitlecardAd",0,0,p,l);k.appendChild(y);var u={};u.id="adaptvBannerCount"+n;u.count=a;u.calculate=function(){var z=adaptvAdPlayer.interval;z.count--;try{document.getElementById(z.id).innerHTML=b.replace("<replaced>",z.count)}catch(A){}if(z.count<=0){clearInterval(z.call)}};adaptvAdPlayer.interval=u}}k.style.top="0px";k.style.opacity=0;k.style.MozOpacity=0;k.style.KhtmlOpacity=0;k.style.filter="alpha(opacity="+0+")";d.appendChild(k);if(r=="banner"&&t){var s=this.createDiv("adaptvBannerClose"+n,0,p-h-2,h,c);s.style.cursor="pointer";s.onclick=this.closeAd;var j="https:"==document.location.protocol;var x=j?"https://adaptv-a.akamaihd.net":"http://redir.adap.tv";if(adaptvBrowserDetect.OS=="Windows"&&adaptvBrowserDetect.browser=="Explorer"&&adaptvBrowserDetect.version==6){s.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+x+'/runtime/tabbedCloseButton.png", sizingMethod="scale");'}else{s.innerHTML='<img src="'+x+'/runtime/tabbedCloseButton.png" />'}k.appendChild(s)}if(this.isIFrameAd(g)){var q=this.createIFrame("adaptvBannerFrame",n,g,p,l,delegate(adaptvAdPlayer,adaptvAdPlayer.activateClickTracking),delegate(adaptvAdPlayer,adaptvAdPlayer.deactivateClickTracking),delegate(adaptvAdPlayer,adaptvAdPlayer.adIFrameLoaded));y.appendChild(q)}else{this.injectHTML(y,g,false,"adaptvBannerFrame",n,p,l)}}return o},injectHTMLByDivId:function(h,e,g,b,f,c,i){var a=window.adaptvUtils.getCompanionDivById(h);if(!a){return false}if(e===undefined||e=="undefined"||e===null){return false}var d=[a,e,g,b,f,c,i];setTimeout(function(){return adaptvAdPlayer.injectCompanionHTMLHelper.apply(adaptvAdPlayer,d)},adaptvAdPlayer.DIV_SEARCH_PERIOD);return true},injectCompanionHTMLHelper:function(h,c,f,e,d,g,b){var a=h;var c=c;var f=f;if(!g){g=a.clientWidth}if(g<=0||g===undefined||g===null){g=adaptvAdPlayer.DEFAULT_COMP_WIDTH}if(!b){b=a.clientHeight}if(b<=0||b===undefined||b===null){b=adaptvAdPlayer.DEFAULT_COMP_HEIGHT}adaptvAdPlayer.injectHTML(a,c,f,null,null,g,b)},injectIFrameByDivId:function(h,j,g,b,k,f){var d=window.adaptvUtils.getCompanionDivById(h);if(!d){return false}var c=document.createElement("IFRAME");c.src=j;c.style.backgroundColor="white";c.style.background="white";c.style.width=b+"px";c.style.height=k+"px";c.style.border="0px";c.scrolling="no";c.frameBorder="0";c.marginWidth="0px";c.marginHeight="0px";c.hspace="0";c.vspace="0";if(g){while(d.hasChildNodes()){d.removeChild(d.firstChild)}}d.appendChild(c);if(f!=null){for(var e=0;e<f.length;e++){var a=document.createElement("img");a.height=0;a.width=0;a.src=f[e];d.appendChild(a)}}return true},injectHTML:function(g,e,h,a,f,b,i){if(a===undefined||a===null){a="DEFAULT_ADAPTV_FRAME"}if(f===undefined||f===null){f="DEFAULT_ADAPTV_ID"}var c=this.createIFrame(a,f,"",b,i,delegate(adaptvAdPlayer,adaptvAdPlayer.activateClickTracking),delegate(adaptvAdPlayer,adaptvAdPlayer.deactivateClickTracking));c.style.position="relative";if(h){while(g.hasChildNodes()){g.removeChild(g.firstChild)}}g.appendChild(c);var d=c.contentDocument?c.contentDocument:c.contentWindow.document;this.forIFrame(d,e,f)},forIFrame:function(c,e,h){var g="<script type='text/javascript'>";var a="<\/script>";if(adaptvBrowserDetect.browser=="Firefox"){document.adapSrc=adaptvBrowserDetect.version==2?"<div style='color:#FFF; font-size:1%' id='dummy'>Remove me!</div>"+e:e;document.recallSrc=g+"document.adaptvContainer.writeChanges();"+a;var f=g+"document.adaptvContainer = {};var container = document.adaptvContainer;container.buffer = parent.document.adapSrc;container.recall = parent.document.recallSrc;container.loaded = false;document.oldWrite = document.write;document.write = function(foo) {document.adaptvContainer.buffer += foo;};document.writeln = function(foo) {document.adaptvContainer.buffer += foo + String.fromCharCode(10);};container.writeChanges = function() {if (document.adaptvContainer.buffer.length > 0) {var temp = document.adaptvContainer.buffer;document.adaptvContainer.buffer = '';temp += document.adaptvContainer.recall;document.oldWrite(temp);}else {try{ document.body.removeChild(document.getElementById('dummy')); } catch (e) {}document.adaptvContainer.loaded = true;document.close();}};container.writeChanges();"+a;c.open();c.write(f)}else{var b=g+"document.adaptvContainer = {};document.adaptvContainer.loaded = false;"+a;var d=g+"document.adaptvContainer.loaded = true;"+a;c.open();c.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><body>'+b+e+d+"</body></html>")}if(!(adaptvBrowserDetect.browser==="Explorer"&&adaptvBrowserDetect.version===8)&&!(adaptvBrowserDetect.browser==="Explorer"&&adaptvBrowserDetect.version===9)){c.close()}clearInterval(adaptvAdPlayer.probeInterval);adaptvAdPlayer.probeInterval=setInterval(delegate(adaptvAdPlayer,adaptvAdPlayer.probeChild,h),100)},isIFrameAd:function(a){return a.indexOf("http")===0},probeChild:function(d){try{var c=document.getElementById("adaptvBannerFrame");var b=c.contentDocument?c.contentDocument:c.contentWindow.document;if(b.adaptvContainer.loaded){adaptvAdPlayer.adLoaded(d,false);clearInterval(adaptvAdPlayer.probeInterval)}}catch(a){clearInterval(adaptvAdPlayer.probeInterval)}},didDartFail:function(b,a){return a&&adaptvAdPlayer.iframeLoads[b]!=1},activateClickTracking:function(){this.clickTrackingActive=true},deactivateClickTracking:function(){this.clickTrackingActive=false},checkAdaptvBannerClick:function(){if(this.clickTrackingActive){var a=document.getElementById("adaptv_ad_player_div");if(typeof(a)!="undefined"){var b=this.parseAdIDFromDivID(a.showBannerId);if(this.videoPlayerNode!==undefined&&this.videoPlayerNode!==null){this.videoPlayerNode["click"+b]({type:"adClick",bubbles:"false"})}}}},adIFrameLoaded:function(){if(adaptvAdPlayer.videoPlayerNode!==undefined&&adaptvAdPlayer.videoPlayerNode!==null){var b=document.getElementById("adaptv_ad_player_div");var a=document.getElementById("adaptvBannerFrame");var c=a.showBannerId;if(typeof(b)!="undefined"&&b.showBannerId!=null&&b.showBannerId!="undefined"){c=adaptvAdPlayer.parseAdIDFromDivID(b.showBannerId)}if(typeof(adaptvAdPlayer.iframeLoads[c])=="undefined"){adaptvAdPlayer.iframeLoads[c]=1;adaptvAdPlayer.iframeTimeouts[c]=setTimeout(delegate(adaptvAdPlayer,adaptvAdPlayer.adLoaded,c,true),500)}else{clearTimeout(adaptvAdPlayer.iframeTimeouts[c]);adaptvAdPlayer.iframeLoads[c]++;adaptvAdPlayer.adLoaded(c,true)}}},adLoaded:function(d,c){var a=adaptvAdPlayer.didDartFail(d,c).toString();var b="adLoaded"+d;adaptvAdPlayer.videoPlayerNode[b]({type:"adLoaded",noAd:a,bubbles:"false"})},closeAd:function(){var a=document.getElementById("adaptv_ad_player_div");if(a.showBannerId!==undefined&&a.showBannerId!==null){var b=adaptvAdPlayer.parseAdIDFromDivID(a.showBannerId);if(adaptvAdPlayer.videoPlayerNode!==undefined&&adaptvAdPlayer.videoPlayerNode!==null){a.closeClicked=true;adaptvAdPlayer.videoPlayerNode["close"+b]({type:"closeClick",bubbles:"false"})}}},parseAdIDFromDivID:function(a){if(a===null||a===undefined){return""}return a.substr(12)},showAd:function(a,c){var e=adaptvAdPlayer.parseAdIDFromDivID(a);if(e===null||e===undefined){e=""}if(c=="companion"){adaptvAdPlayer.showCompanionAd(a,c);return}var d=document.getElementById("adaptv_ad_player_div");d.style.display="block";if(!d.opening&&typeof(a)!="undefined"){d.opening=true;var b=document.getElementById("adaptvViewport"+e);b.style.display="block";d.showBannerId=a;if(c=="titlecard"){adaptvAdPlayer.interval.call=setInterval(adaptvAdPlayer.interval.calculate,1000);adaptvAdPlayer.fadeInOut(a,0,true,150,e)}else{adaptvAdPlayer.fadeInOut(a,0,true,500,e)}}},hideAd:function(a,b){if(a==null){return}var c=document.getElementById("adaptv_ad_player_div");var d=adaptvAdPlayer.parseAdIDFromDivID(a);if(d===null||d===undefined){d=""}if(!c.closing&&(c.adaptvWidth<800||c.adaptvHeight<600)&&typeof(a)!="undefined"){c.closing=true;if(c.showBannerId==a){c.showBannerId=null}if(b=="titlecard"){adaptvAdPlayer.fadeInOut(a,1,false,150,d)}else{adaptvAdPlayer.fadeInOut(a,1,false,300,d)}}},cancelFade:function(a,b){setTimeout(function(){if(adaptvAdPlayer.fadeTimeout){clearTimeout(adaptvAdPlayer.fadeTimeout)}adaptvAdPlayer.changeOpacity();adaptvAdPlayer.killViewport(b)},a)},changeOpacity:function(){var a=adaptvAdPlayer.fadeMode?100:0;if(adaptvAdPlayer.fadeMode){adaptvAdPlayer.fadeObject.opacity=(a/100);adaptvAdPlayer.fadeObject.MozOpacity=(a/100);adaptvAdPlayer.fadeObject.KhtmlOpacity=(a/100);adaptvAdPlayer.fadeObject.filter="alpha(opacity="+a+")"}},killViewport:function(b){var a;if(adaptvAdPlayer.fadeMode){a=document.getElementById("adaptv_ad_player_div");a.opening=false}if(!adaptvAdPlayer.fadeMode){a=document.getElementById("adaptv_ad_player_div");this.adClosed(a,a.closeClicked,b)}adaptvAdPlayer.fadeTimeout=null},fadeInOut:function(b,g,e,c,a){var d;if(e&&g>=1){d=document.getElementById("adaptv_ad_player_div");d.opening=false;return}if(!e&&g<=0){d=document.getElementById("adaptv_ad_player_div");d.banner_ad_queue_full=false;this.adClosed(d,d.closeClicked,a);return}var i=e?0.1:-0.1;var f=Math.floor((g+i)*100+0.5);var h=document.getElementById(b);if(h!==undefined&&h!==null){h.style.opacity=(f/100);h.style.MozOpacity=(f/100);h.style.KhtmlOpacity=(f/100);h.style.filter="alpha(opacity="+f+")";if(adaptvAdPlayer.fadeTimeout){adaptvAdPlayer.fadeTimeout=null}else{adaptvAdPlayer.fadeObject=h.style;adaptvAdPlayer.cancelFade(c*2,a);adaptvAdPlayer.fadeMode=e}adaptvAdPlayer.fadeTimeout=setTimeout(delegate(adaptvAdPlayer,adaptvAdPlayer.fadeInOut,b,f/100,e,c,a),c/10)}},adClosed:function(c,a,d){c.style.display="none";if(a===undefined){a=false}c.closing=false;var b=document.getElementById("adaptvViewport"+d);if(b!=undefined){b.style.overflow="visible";b.style.display="none";document.getElementById("adaptv_ad_player_div").removeChild(b)}},toString:function(){return"AdapTV HTML Ad Player"}}})();